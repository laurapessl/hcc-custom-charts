!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).RawCharts_paretochart={},t.d3)}(this,function(t,e){"use strict";function a(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(a){if("default"!==a){var s=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:function(){return t[a]}})}}),e.default=t,Object.freeze(e)}var s=a(e);var l={metadata:{name:"Pareto Chart",id:"rawgraphs.paretochart",thumbnail:"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg id='Ebene_1' xmlns='http://www.w3.org/2000/svg' version='1.1' viewBox='0 0 805 600'%3e %3c!-- Generator: Adobe Illustrator 29.5.1%2c SVG Export Plug-In . SVG Version: 2.1.0 Build 141) --%3e %3cdefs%3e %3cstyle%3e .st0 %7b font-family: Helvetica%2c Helvetica%3b %7d .st0%2c .st1 %7b font-size: 10px%3b %7d .st1 %7b font-family: MyriadPro-Regular%2c 'Myriad Pro'%3b %7d .st2 %7b fill: %23e90006%3b %7d .st2%2c .st3%2c .st4 %7b stroke-miterlimit: 10%3b %7d .st2%2c .st4 %7b stroke: %23e90006%3b stroke-width: 2px%3b %7d .st5 %7b fill: %234a78dd%3b %7d .st3 %7b stroke: black%3b %7d .st3%2c .st4 %7b fill: none%3b %7d %3c/style%3e %3c/defs%3e %3cpolyline class='st3' points='722.85 72.4 722.85 504.74 92.41 504.74 92.43 72.41'/%3e %3cline class='st3' x1='86.85' y1='72.91' x2='92.03' y2='72.91'/%3e %3cline class='st3' x1='86.86' y1='159.27' x2='92.04' y2='159.27'/%3e %3cline class='st3' x1='86.84' y1='245.65' x2='92.02' y2='245.65'/%3e %3cline class='st3' x1='86.85' y1='332' x2='92.03' y2='332'/%3e %3cline class='st3' x1='86.85' y1='418.39' x2='92.03' y2='418.39'/%3e %3cline class='st3' x1='86.87' y1='504.8' x2='92.05' y2='504.8'/%3e %3cline class='st3' x1='723.25' y1='504.75' x2='728.43' y2='504.75'/%3e %3cline class='st3' x1='723.34' y1='461.57' x2='728.52' y2='461.57'/%3e %3cline class='st3' x1='723.26' y1='418.39' x2='728.43' y2='418.39'/%3e %3cline class='st3' x1='723.26' y1='375.17' x2='728.44' y2='375.17'/%3e %3cline class='st3' x1='723.34' y1='332.01' x2='728.52' y2='332.01'/%3e %3cline class='st3' x1='723.33' y1='288.82' x2='728.51' y2='288.82'/%3e %3cline class='st3' x1='723.32' y1='245.67' x2='728.5' y2='245.67'/%3e %3cline class='st3' x1='723.27' y1='202.45' x2='728.45' y2='202.45'/%3e %3cline class='st3' x1='723.29' y1='159.25' x2='728.47' y2='159.25'/%3e %3cline class='st3' x1='723.34' y1='116.08' x2='728.52' y2='116.08'/%3e %3cline class='st3' x1='723.33' y1='72.89' x2='728.51' y2='72.89'/%3e %3cline class='st3' x1='176.89' y1='505.21' x2='176.89' y2='510.39'/%3e %3cline class='st3' x1='330.73' y1='505.22' x2='330.73' y2='510.4'/%3e %3cline class='st3' x1='484.55' y1='505.21' x2='484.55' y2='510.39'/%3e %3cline class='st3' x1='638.37' y1='505.14' x2='638.37' y2='510.32'/%3e %3cline class='st3' x1='722.84' y1='505.05' x2='722.84' y2='510.23'/%3e %3cline class='st3' x1='92.41' y1='505.17' x2='92.41' y2='510.35'/%3e %3ctext class='st1' transform='translate(78.32 508.16)'%3e%3ctspan x='0' y='0'%3e0%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(73.82 421.74)'%3e%3ctspan x='0' y='0'%3e50%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(69 335.29)'%3e%3ctspan x='0' y='0'%3e100%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(68.58 248.93)'%3e%3ctspan x='0' y='0'%3e150%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(68.67 162.5)'%3e%3ctspan x='0' y='0'%3e200%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(68.5 76.08)'%3e%3ctspan x='0' y='0'%3e250%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(730.93 508.2)'%3e%3ctspan x='0' y='0'%3e0%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(731.07 465.01)'%3e%3ctspan x='0' y='0'%3e10%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(730.91 421.6)'%3e%3ctspan x='0' y='0'%3e20%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(731.16 378.5)'%3e%3ctspan x='0' y='0'%3e30%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(731.04 335.24)'%3e%3ctspan x='0' y='0'%3e40%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(731.1 292.16)'%3e%3ctspan x='0' y='0'%3e50%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(731.07 248.82)'%3e%3ctspan x='0' y='0'%3e60%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(731.16 205.65)'%3e%3ctspan x='0' y='0'%3e70%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(730.99 162.57)'%3e%3ctspan x='0' y='0'%3e80%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(730.99 119.32)'%3e%3ctspan x='0' y='0'%3e90%25%3c/tspan%3e%3c/text%3e %3ctext class='st1' transform='translate(730.92 75.93)'%3e%3ctspan x='0' y='0'%3e100%25%3c/tspan%3e%3c/text%3e %3ctext class='st0' transform='translate(167.8 528.35) rotate(-45)'%3e%3ctspan x='0' y='0'%3eCar%3c/tspan%3e%3c/text%3e %3ctext class='st0' transform='translate(316.82 532.83) rotate(-45)'%3e%3ctspan x='0' y='0'%3eTrain%3c/tspan%3e%3c/text%3e %3ctext class='st0' transform='translate(465.19 538.4) rotate(-45)'%3e%3ctspan x='0' y='0'%3eBicycle%3c/tspan%3e%3c/text%3e %3ctext class='st0' transform='translate(615.74 541.57) rotate(-45)'%3e%3ctspan x='0' y='0'%3eWalking%3c/tspan%3e%3c/text%3e %3cpolyline class='st4' points='176.59 280.12 330.61 142.2 484.43 90.02 638.45 72.95'/%3e %3ccircle class='st2' cx='330.93' cy='141.96' r='2.62'/%3e %3ccircle class='st2' cx='484.57' cy='90.04' r='2.62'/%3e %3cpolygon class='st5' points='107.7 504.01 107.7 280.18 246.12 280.18 246.12 504.3 107.7 504.01'/%3e %3ccircle class='st2' cx='638.43' cy='73.07' r='2.62'/%3e %3ccircle class='st2' cx='177.01' cy='280.02' r='2.62'/%3e %3cpolygon class='st5' points='261.71 504.13 261.71 366.63 400.13 366.63 400.13 504.3 261.71 504.13'/%3e %3cpolygon class='st5' points='415.33 504.15 415.33 452.96 553.75 452.96 553.75 504.21 415.33 504.15'/%3e %3cpolygon class='st5' points='569.17 504.27 569.17 487.37 707.59 487.37 707.59 504.29 569.17 504.27'/%3e%3c/svg%3e",icon:"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg id='rawgraphs-icons' xmlns='http://www.w3.org/2000/svg' version='1.1' viewBox='0 0 41.25 41.4'%3e %3c!-- Generator: Adobe Illustrator 29.5.1%2c SVG Export Plug-In . SVG Version: 2.1.0 Build 141) --%3e %3cdefs%3e %3cstyle%3e .st0 %7b fill: none%3b stroke: %23ad00ff%3b stroke-miterlimit: 10%3b %7d .st1 %7b fill: %23ad00ff%3b %7d %3c/style%3e %3c/defs%3e %3crect class='st1' x='9.06' y='24.05' width='5.39' height='9.03'/%3e %3cpolyline class='st0' points='13.91 22.85 19.41 16.69 25.78 12.14 32.28 9.8'/%3e %3crect class='st1' x='7.8' y='7.45' width='.66' height='26.87'/%3e %3cpolygon class='st1' points='7 8.69 8.12 7.53 9.25 8.69 9.25 7.7 8.12 6.54 7 7.7 7 8.69'/%3e %3crect class='st1' x='7.83' y='33.66' width='26.01' height='.68'/%3e %3cpolygon class='st1' points='32.52 32.84 33.65 34.01 32.52 35.17 33.48 35.17 34.6 34.01 33.48 32.84 32.52 32.84'/%3e %3crect class='st1' x='14.94' y='26.32' width='5.39' height='6.77'/%3e %3crect class='st1' x='20.84' y='27.36' width='5.39' height='5.75'/%3e %3crect class='st1' x='26.69' y='30.65' width='5.39' height='2.46'/%3e%3c/svg%3e",categories:["Comparison","Proportions"],description:"A bar chart, which shows the most significant factors in descending order and with an additional cumulative line.",code:"https://github.com/rawgraphs/rawgraphs-pareto-chart",tutorial:"https://github.com/rawgraphs/rawgraphs-paretochart#tutorial"},dimensions:[{id:"x",name:"X axis",validTypes:["string"],required:!0},{id:"y",name:"Y axis",validTypes:["number"],required:!0}],mapData:{x:"get",y:"get"},render:function(t,e,a,l,r,c){const{background:n,width:i,height:o,marginTop:x,marginBottom:d,marginLeft:p,marginRight:y,padding:b,barColor:f,cumulativeLineColor:m,axisLeftLabel:g,axisLeftLabelVisible:u,axisRightLabel:h,axisRightLabelVisible:v,axisBottomLabel:w,axisBottomLabelVisible:L,labelBottomAlignment:k,labelBottomRotation:B,sortBarsBy:A,showCumulativeLine:S}=a;let R=s.rollups(e,t=>s.sum(t,t=>t.y),t=>t.x);const C={totalDescending:(t,e)=>s.descending(t[1],e[1]),totalAscending:(t,e)=>s.ascending(t[1],e[1]),name:(t,e)=>s.ascending(t[0],e[0]),original:()=>0};R.sort(C[A]||C.totalDescending);const V=s.sum(R,t=>t[1]);let O=0;const P=R.map(([t,e])=>(O+=e,{category:t,value:e,cumulative:O/V,cumulativeSum:O})),j=s.select(t);j.selectAll("*").remove(),j.append("rect").attr("width",i).attr("height",o).attr("fill",n);const z=i-p-y,F=o-x-d,M=j.append("g").attr("transform",`translate(${p},${x})`),T=s.scaleBand().domain(P.map(t=>t.category)).range([0,z]).padding(b),W=s.scaleLinear().domain([0,s.max(P,t=>t.cumulativeSum)]).range([F,0]),D=s.scaleLinear().domain([0,1]).range([F,0]);M.selectAll(".bar").data(P).join("rect").attr("class","bar").attr("x",t=>T(t.category)).attr("width",T.bandwidth()).attr("y",t=>W(t.value)).attr("height",t=>F-W(t.value)).attr("fill",t=>f),u&&M.append("text").attr("transform","rotate(-90)").attr("x",-F/2).attr("y",15-p).attr("text-anchor","middle").styles(c.axisLabel).text(g);const G=s.axisLeft(W).ticks(5).tickFormat(s.format("~s"));M.append("g").call(G);const _=s.axisBottom(T);M.append("g").attr("transform",`translate(0,${F})`).call(_).selectAll("text").attr("text-anchor",k).attr("transform",`rotate(${B})`).attr("dx","-0.8em").attr("dy","0.15em"),L&&w&&M.append("text").attr("x",z/2).attr("y",F+d-10).attr("text-anchor","middle").styles(c.axisLabel).text(w),v&&M.append("text").attr("transform","rotate(-90)").attr("x",-F/2).attr("y",z+y-10).attr("text-anchor","middle").styles(c.axisLabel).text(h);const I=s.axisRight(D).ticks(10).tickFormat(s.format(".0%"));if(M.append("g").attr("transform",`translate(${z},0)`).call(I),S){const t=s.line().x(t=>T(t.category)+T.bandwidth()/2).y(t=>D(t.cumulative));M.append("path").datum(P).attr("fill","none").attr("stroke",m).attr("stroke-width",2).attr("d",t),M.selectAll(".cumulative-point").data(P).join("circle").attr("class","cumulative-point").attr("cx",t=>T(t.category)+T.bandwidth()/2).attr("cy",t=>D(t.cumulative)).attr("r",4).attr("fill",m)}},visualOptions:{labelBottomRotation:{type:"number",label:"Bottom tick label rotation",default:-45,group:"axis"},labelBottomAlignment:{type:"text",label:"Align bottom tick labels to:",group:"axis",options:[{label:"Left",value:"start"},{label:"Middle",value:"middle"},{label:"Right",value:"end"}],default:"end"},axisLeftLabel:{type:"text",label:"Left (value) axis label override",default:"Values",group:"axis"},axisLeftLabelVisible:{type:"boolean",label:"Left axis label visible",default:!0,group:"axis"},axisRightLabel:{type:"text",label:"Right (cumulative %) axis label override",default:"Cumulative %",group:"axis"},axisRightLabelVisible:{type:"boolean",label:"Right axis label visible",default:!0,group:"axis"},axisBottomLabel:{type:"text",label:"Bottom (categories) axis label override",default:"Categories",group:"axis"},axisBottomLabelVisible:{type:"boolean",label:"Bottom axis label visible",default:!0,group:"axis"},marginTop:{type:"number",label:"Margin (top)",default:50,group:"artboard"},marginRight:{type:"number",label:"Margin (right)",default:60,group:"artboard"},marginBottom:{type:"number",label:"Margin (bottom)",default:80,group:"artboard"},marginLeft:{type:"number",label:"Margin (left)",default:60,group:"artboard"},padding:{type:"number",label:"Padding between bars",default:.1,group:"chart"},sortBarsBy:{type:"text",label:"Sort bars by",group:"chart",options:[{label:"Size (descending)",value:"totalDescending"},{label:"Size (ascending)",value:"totalAscending"},{label:"Name",value:"name"},{label:"Original",value:"original"}],default:"totalDescending"},showCumulativeLine:{type:"boolean",label:"Show cumulative % line",default:!0,group:"chart"},barColor:{type:"color",label:"Bar color",default:"#1f77b4",group:"color"},cumulativeLineColor:{type:"color",label:"Cumulative line color",default:"#d62728",group:"color"}},styles:{axisLabel:{fontFamily:"Arial, sans-serif",fontSize:"12",fill:"#7b7b7b",fontWeight:"bold"},axisLine:{stroke:"#ccc"},labelPrimary:{fontFamily:"Arial, sans-serif",fontSize:"10",fill:"black",fontWeight:"bold"},labelSecondary:{fontFamily:"Arial, sans-serif",fontSize:"10",fill:"black",fontWeight:"normal"},labelItalic:{fontFamily:"Arial, sans-serif",fontSize:"10",fill:"black",fontWeight:"normal",fontStyle:"italic"},seriesLabel:{fontFamily:"Arial, sans-serif",fontSize:"12",fill:"black",fontWeight:"bold",dominantBaseline:"hanging"},labelOutline:{strokeWidth:"2",paintOrder:"stroke",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}}};t.default=l,Object.defineProperty(t,"__esModule",{value:!0})});
