!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).RawCharts_bulletchart={},e.d3)}(this,(function(e,t){"use strict";function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var r=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,r.get?r:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var r=a(t);var l={metadata:{name:"Bullet Chart",id:"rawgraphs.bulletchart",thumbnail:"data:image/svg+xml,%3csvg width='120' height='100' viewBox='0 0 120 100' xmlns='http://www.w3.org/2000/svg'%3e %3c!-- Bar 1 --%3e %3cg transform='translate(10%2c 10)'%3e %3crect x='0' y='0' width='100' height='10' fill='%23e6dbf5'%3e%3c/rect%3e %3crect x='0' y='0' width='70' height='10' fill='%23c7b3ea'%3e%3c/rect%3e %3crect x='0' y='0' width='40' height='10' fill='%23a98de0'%3e%3c/rect%3e %3crect x='0' y='2' width='60' height='6' fill='%236a0dad'%3e%3c/rect%3e %3crect x='80' y='-1' width='2' height='12' fill='%239b30ff'%3e%3c/rect%3e %3c/g%3e %3c!-- Bar 2 --%3e %3cg transform='translate(10%2c 40)'%3e %3crect x='0' y='0' width='100' height='10' fill='%23e6dbf5'%3e%3c/rect%3e %3crect x='0' y='0' width='70' height='10' fill='%23c7b3ea'%3e%3c/rect%3e %3crect x='0' y='0' width='40' height='10' fill='%23a98de0'%3e%3c/rect%3e %3crect x='0' y='2' width='45' height='6' fill='%236a0dad'%3e%3c/rect%3e %3crect x='75' y='-1' width='2' height='12' fill='%239b30ff'%3e%3c/rect%3e %3c/g%3e %3c!-- Bar 3 --%3e %3cg transform='translate(10%2c 70)'%3e %3crect x='0' y='0' width='100' height='10' fill='%23e6dbf5'%3e%3c/rect%3e %3crect x='0' y='0' width='70' height='10' fill='%23c7b3ea'%3e%3c/rect%3e %3crect x='0' y='0' width='40' height='10' fill='%23a98de0'%3e%3c/rect%3e %3crect x='0' y='2' width='80' height='6' fill='%236a0dad'%3e%3c/rect%3e %3crect x='90' y='-1' width='2' height='12' fill='%239b30ff'%3e%3c/rect%3e %3c/g%3e%3c/svg%3e",icon:"data:image/svg+xml,%3csvg width='120' height='40' viewBox='0 0 120 40' xmlns='http://www.w3.org/2000/svg'%3e %3cg transform='translate(10%2c10)'%3e %3c!-- Background ranges --%3e %3crect x='0' y='5' width='100' height='10' fill='%23e6dbf5'%3e%3c/rect%3e %3crect x='0' y='5' width='70' height='10' fill='%23c7b3ea'%3e%3c/rect%3e %3crect x='0' y='5' width='40' height='10' fill='%23a98de0'%3e%3c/rect%3e %3c!-- Actual performance bar --%3e %3crect x='0' y='7' width='60' height='6' fill='%236a0dad'%3e%3c/rect%3e %3c!-- Target marker --%3e %3crect x='80' y='4' width='2' height='12' fill='%239b30ff'%3e%3c/rect%3e %3c/g%3e%3c/svg%3e",categories:["Comparison"],description:"A horizontal bullet chart visualizing a primary measure against qualitative ranges with a target marker.",code:"https://github.com/rawgraphs/rawgraphs-bullet-chart",tutorial:"https://github.com/rawgraphs/rawgraphs-bulletchart#tutorial"},dimensions:[{id:"measure",name:"Current Value",validTypes:["number"],required:!0,description:"The actual performance value to display"},{id:"target",name:"Target Value",validTypes:["number"],required:!1,description:"The target value to compare against"},{id:"ranges",name:"Qualitative Ranges",validTypes:["number"],required:!1,multiple:!0,description:"Background ranges (poor, satisfactory, good)"},{id:"label",name:"Chart Labels",validTypes:["string"],required:!0,description:"Labels for each bullet chart"}],mapData:{measure:"get",target:"get",ranges:"get",label:"get"},render:function(e,t,a,l,i,c){r.select(e).selectAll("*").remove();const{width:o,chartHeight:n,chartSpacing:s,marginTop:h,marginRight:g,marginBottom:d,marginLeft:f,globalScale:u,showValues:p,showTicks:b,tickCount:m,rangeColors:y,measureColor:w,targetColor:x,showPerformanceIndicators:k}=a,v=h+d+t.length*n+(t.length-1)*s,T=o-f-g,C=r.select(e).attr("viewBox",`0 0 ${o} ${v}`).attr("width","100%").attr("height","100%").attr("preserveAspectRatio","xMidYMid meet").append("g").attr("transform",`translate(${f},${h})`),S=t.map((e=>{const t=+e.measure||0,a=+e.target||1.2*t||0;let r=[];return e.ranges&&Array.isArray(e.ranges)&&(r=e.ranges.map((e=>+e)).sort(((e,t)=>t-e))),r.length<2&&(r=[.9*t,.6*t].sort(((e,t)=>t-e))),{measure:t,target:a,ranges:r,label:e.label||"Untitled"}}));let B=0;u&&(B=r.max(S,(e=>Math.max(e.measure,e.target,...e.ranges)))),S.forEach(((e,t)=>{const a=t*(n+s),l=u?B:Math.max(e.measure,e.target,...e.ranges),i=r.scaleLinear().domain([0,l]).range([0,T]),c=C.append("g").attr("transform",`translate(0,${a})`).attr("class",`bullet-chart-${t}`);if(e.ranges.forEach(((e,t)=>{const a=Math.min(t,y.length-1);c.append("rect").attr("class",`range range-${t}`).attr("x",0).attr("y",0).attr("width",i(e)).attr("height",n).attr("fill",y[a]).attr("opacity",.5).attr("stroke","#fff").attr("stroke-width",.5)})),c.append("rect").attr("class","measure").attr("x",1).attr("y",.25*n).attr("width",i(e.measure)).attr("height",.5*n).attr("fill",w).attr("stroke",r.rgb(w).darker(.5)).attr("stroke-width",1),e.target>0&&c.append("line").attr("class","target-line").attr("x1",i(e.target)).attr("x2",i(e.target)).attr("y1",0).attr("y2",n).attr("stroke",x).attr("stroke-width",3).attr("opacity",.8),c.append("text").attr("class","chart-label").attr("x",-10).attr("y",n/2).attr("text-anchor","end").attr("dominant-baseline","middle").text(e.label).style("font-size","12").style("font-weight","bold").style("fill","#333"),p&&c.append("text").attr("class","measure-value").attr("x",i(e.measure)+5).attr("y",n/2).attr("dominant-baseline","middle").text(r.format(",.0f")(e.measure)).style("font-size","10").style("font-weight","bold").style("fill",w),k&&e.target>0){const t=e.measure/e.target;let a="",r="#666";t>=1?(a="✓ Target Met",r="#28a745"):t>=.9?(a="~ Near Target",r="#ffc107"):(a="✗ Below Target",r="#dc3545"),c.append("text").attr("class","performance-indicator").attr("x",T+50).attr("y",n/2).attr("dominant-baseline","middle").text(a).style("font-size","10").style("font-weight","bold").style("fill",r)}if(b&&(t===S.length-1||u)){const e=i.ticks(m),t=c.append("g").attr("class","tick-group");e.forEach((e=>{t.append("line").attr("x1",i(e)).attr("x2",i(e)).attr("y1",n).attr("y2",n+5).attr("stroke","#666").attr("stroke-width",.5),t.append("text").attr("x",i(e)).attr("y",n+18).attr("text-anchor","middle").text(r.format(",.0f")(e)).style("font-size","10").style("fill","#666")}))}}))},visualOptions:{width:{type:"number",label:"Width (px)",default:600,group:"artboard"},chartHeight:{type:"number",label:"Individual Chart Height",default:35,group:"artboard",description:"Height of each bullet chart"},chartSpacing:{type:"number",label:"Spacing Between Charts",default:20,group:"artboard",description:"Vertical space between charts"},marginTop:{type:"number",label:"Top Margin",default:30,group:"artboard"},marginRight:{type:"number",label:"Right Margin",default:150,group:"artboard"},marginBottom:{type:"number",label:"Bottom Margin",default:30,group:"artboard"},marginLeft:{type:"number",label:"Left Margin",default:150,group:"artboard"},globalScale:{type:"boolean",label:"Use Global Scale",default:!1,group:"chart",description:"Use same scale for all charts"},showValues:{type:"boolean",label:"Show Values",default:!1,group:"chart"},showTicks:{type:"boolean",label:"Show Axis Ticks",default:!0,group:"chart"},tickCount:{type:"number",label:"Number of Ticks",default:5,group:"chart"},rangeColors:{type:"colorScale",label:"Range Colors",default:["#ffcccc","#ffe6cc","#ccffcc"],group:"chart"},measureColor:{type:"color",label:"Measure Bar Color",default:"#4682b4",group:"chart"},targetColor:{type:"color",label:"Target Line Color",default:"#2c3e50",group:"chart"},showPerformanceIndicators:{type:"boolean",label:"Show Performance Indicators",default:!0,group:"chart"}},styles:{axisLabel:{fontFamily:"Arial, sans-serif",fontSize:"12",fill:"#7b7b7b",fontWeight:"bold"},axisLine:{stroke:"#ccc"},labelPrimary:{fontFamily:"Arial, sans-serif",fontSize:"10",fill:"black",fontWeight:"bold"},labelSecondary:{fontFamily:"Arial, sans-serif",fontSize:"10",fill:"black",fontWeight:"normal"},labelItalic:{fontFamily:"Arial, sans-serif",fontSize:"10",fill:"black",fontWeight:"normal",fontStyle:"italic"},seriesLabel:{fontFamily:"Arial, sans-serif",fontSize:"12",fill:"black",fontWeight:"bold",dominantBaseline:"hanging"},labelOutline:{strokeWidth:"2",paintOrder:"stroke",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"}}};e.default=l,Object.defineProperty(e,"__esModule",{value:!0})}));
